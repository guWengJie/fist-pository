<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<table>
			<tr>
				<td>手机号码:</td>
				<td><input type="tel" id="tel" name="tel"/></td>
				<td><button id="getNum">获取验证码</button></td>
				<td color="red" id="getNum01"></td>
			</tr>
			<tr>
				<td>验证码:</td>
				<td><input type="text" id="yzm" name="yzm"/></td>
				<td><button id="checkNum">校验</button></td>
				<td color="red" id="checkNum01"></td>
			</tr>
		</table>
	</body>
</html>
<script type="text/javascript" src="../js/jquery-3.3.1.js" ></script>
<script>
	$(function(){
		var gwj={
		"userName":/^[A-Z]\w{6}$/,
		"userPass":/^\d{11}$/,
		"funName":function(name){
			if(this.userName.test(name)){
				alert("Ok");
			}else{
				alert("用户名要首母大写（7位数）")
			}
		},
		"funPass":function(pass){
			if(this.userPass.test(pass)){
				alert("Ok");
			}else{
				alert("密码要11位数字")
			}
		}
	}
	var name="W1223456";
	var pass="12345678910"
//	gwj.funName(name);
//	gwj.funPass(pass);
	
//	var theResponse = window.prompt("欢迎？","请在此输入您的姓名。");
//	alert("你输入的姓名是：" + theResponse);
//	var truthBeTold = window.confirm("继续。停止");
//	if (truthBeTold) {
//		location='./text.html';
//	} else {
//		window.alert("再见啦！");
//	}
//		document.write("asdfasdf")
//	function fun(){
//		location='./text.html';
//	}
	
		
		
		
		   var btnObj=document.querySelector("#getNum");
		      $(btnObj).click(function(){
		      	var tel=$("#tel").val();//text()
		      	  console.log(tel)
			      	btnObj.disabled=true;
			      	var num=60;
			      	var timer=setInterval(function(){
			      		var This=btnObj
			      		  This.innerText=num+"s"
			      		   num--;
			      		   if(num==0){
			      		   	clearInterval(timer);
			      		   	    This.innerText="获取验证码"
			      		   	    btnObj.disabled=false;
			      		   }
			      	},1000);
//			      	  url:地址，接口
  				var url = "http://120.237.120.246:6777/stu_sms/basicFrameWork!sendAuthCode.action";
			    var data = {"telephone" : tel};
			      	$.post(url,data,function(data){
			      		if(tel){
			      			
			      		}
			      		    console.log(data);
			      		    $("#getNum01").text(data.codeDesc);
			      	})
			      	    
		      })
		      //request.getparamter()
		      
		      $("#checkNum").click(function(){
		      	    var yzm=$("#yzm").val();
		      	    var tel=$("#tel").val();
		      	    var url = "http://120.237.120.246:6777/stu_sms/basicFrameWork!authCode.action";
			    var data = {"telephone" : tel,"authCode":yzm};
			      	$.post(url,data,function(data){
			      		    if(data.code==0){
			      		    	$("#checkNum01").text(data.codeDesc);
//			      		    	var se=setInterval(function(){
//			      		    		location="#";
//			      		    	},4000)
			      		    }else{
			      		    	$("#checkNum01").text(data.codeDesc);
			      		    	var se=setInterval(function(){
			      		    		$("#checkNum01").text("");
			      		    	},1000)
			      		    }
			      		    
			      	})
		      	    
		      })
	})
</script>


